# 培训机构排课系统

一个为培训机构设计的排课系统，用于管理教师、课程和教室资源，以及课程安排。系统采用移动端优先的设计思路，结合Figma风格的现代UI。

## 功能特点

- **移动端友好**：采用响应式设计，在手机和平板上有良好的体验
- **日历视图**：支持日、周、月多种视图模式查看课程安排
- **课程管理**：老师可以创建自己的课程，选择时间、教室和颜色
- **权限控制**：区分老师和管理员角色，管理员可管理所有资源
- **教室管理**：查看教室使用情况，避免冲突
- **直观界面**：使用不同颜色区分不同课程，提高可读性

## 技术栈

- HTML5
- CSS3 (自定义设计系统)
- JavaScript (原生，无框架)

## 如何使用

### 账户信息

- **管理员账户**
  - 用户名：admin
  - 密码：admin123
  
- **教师账户**
  - 用户名：teacher1
  - 密码：teacher123

### 教师功能

1. 使用教师账户登录
2. 在日历视图中查看自己的课程安排
3. 点击"+"按钮创建新课程
4. 填写课程信息并保存
5. 点击现有课程可以编辑或删除

### 管理员功能

1. 使用管理员账户登录
2. 进入管理后台，查看统计信息
3. 管理教师、课程和教室资源
4. 查看所有课程安排

## 项目结构

```
排课网站/
├── assets/
│   ├── css/
│   │   ├── normalize.css
│   │   ├── main.css
│   │   └── admin.css
│   ├── js/
│   │   ├── calendar.js
│   │   ├── schedule.js
│   │   ├── auth.js
│   │   └── admin.js
│   └── img/
├── data/
│   ├── teachers.json
│   ├── schedule.json
│   ├── rooms.json
│   └── users.json
├── index.html
├── login.html
├── admin.html
└── README.md
```

## 开发计划

- [x] 基础界面设计
- [x] 日历视图功能
- [x] 课程管理功能
- [x] 用户认证
- [x] 管理后台
- [x] 周视图和月视图实现
- [x] 课程编辑和删除功能
- [ ] 数据持久化存储
- [x] 教室冲突检测提示

## 注意事项

- 本系统目前为静态网站，数据存储在本地，重新加载页面会重置数据
- 实际应用中应连接后端API进行数据持久化

## 问题修复说明

本次修复针对排课系统无法登录和页面不断刷新的问题，主要进行了以下更改：

1. 修复了登录页面不断刷新和闪烁的问题
   - 移除了可能导致循环刷新的代码
   - 优化了页面加载和缓存控制

2. 修复了身份验证管理器中的重定向循环问题
   - 增加了防止重定向循环的检测机制
   - 改进了页面路径判断逻辑

3. 优化了数据一致性修复脚本
   - 增加了防止重复执行的标记
   - 优化了初始化数据的逻辑

4. 添加了修复工具页面
   - 提供了检查数据状态的功能
   - 提供了修复和重置数据的功能

## 访问修复工具

如果登录页面仍然出现问题，可以直接访问修复工具页面：

```
https://paike.pages.dev/fix-login.html
```

在修复工具页面，您可以：
1. 检查数据状态
2. 修复数据
3. 完全重置系统数据
4. 返回登录页面

## 登录信息

默认管理员账号:
- 用户名: `admin`
- 密码: `admin123`

教师账号:
- 用户名: `teacher1`
- 密码: `123456`

## 系统功能

排课系统主要功能：

1. 管理员功能
   - 教师管理：添加、编辑、删除教师
   - 课程管理：查看和管理所有课程
   - 系统设置：调整系统参数

2. 教师功能
   - 课程排期：添加、编辑自己的课程
   - 课表查看：查看个人和全局课表

如有其他问题，请联系系统管理员。 